{
    "collab_server" : "",
    "contents" : "library(httr)\nlibrary(jsonlite)\nlibrary(lubridate)\nlibrary(dplyr)\nsource(\"creds.R\")\n\n# access News API (https://newsapi.org/) to get headline articles\n\nsources <- c(\"associated-press\",\"bbc-news\",\"bloomberg\",\"business-insider\",\n             \"buzzfeed\",\"cnbc\",\"cnn\",\"google-news\",\"independent\",\"reuters\",\n             \"the-economist\", \"the-huffington-post\",\"the-new-york-times\",\n             \"the-wall-street-journal\", \"the-washington-post\",\"time\",\"usa-today\")\n\nrequestLinks <- paste0(\"https://newsapi.org/v1/articles?source=\", \n                      sources,\"&apiKey=\", news.API.key) \n# for sorting: \"&sortBy=latest\"\nallData <- vector(\"list\", length(sources))\nfor(x in 1:length(sources)){\n    news.source <- GET(requestLinks[x])\n    news.source <- content(news.source)\n    news.source <- fromJSON(toJSON(news.source))\n    allData[[x]] <- news.source\n}\n\n# 'time magazine' has diff data structure\nallData[[16]]$articles.publishedAt <- NULL\nallData[[16]]$articles.author <- NULL\n\nfor(x in 1:length(allData)){\n  allData[[x]] <- data.frame(sapply(allData[[x]], as.character),\n                             stringsAsFactors = FALSE)\n}\n\n\n# 3/7 need to adjust the structure of the data at this point\n# look into melting\n\n\n# merge all\nallData %>%\n  Reduce( function(df1, df2) full_join(df1, df2), .) ->\nallData\n\n# not 100% vetted\nallData$articles.publishedAt <- ymd_hms(allData$articles.publishedAt)\n\nallData$TrumpFlag <- as.numeric(grepl(\"trump\", tolower(allData$articles.title)))\n\nallData$Retrieved <- now()\nfileName <- paste0(\"TrumpNews\", gsub(\" EST\", \"\", now()), \".csv\")\nfileName <- gsub(\":\", \".\", fileName)\n\nwrite.csv(allData, fileName, row.names = FALSE)\n# 2017-03-05T20:52:49Z <- 3:52pm est\n\n# add component to combine all the csvs that are in the directory\n# to do trend analysis\n",
    "created" : 1491097320432.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3188813377",
    "id" : "B0CCCEB9",
    "lastKnownWriteTime" : 1491097523,
    "last_content_update" : 1491097523953,
    "path" : "D:/Projects/OMTM/0.2-AccessNewsAPI.R",
    "project_path" : "0.2-AccessNewsAPI.R",
    "properties" : {
    },
    "relative_order" : 11,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}