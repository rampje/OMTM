{
    "collab_server" : "",
    "contents" : "library(twitteR)\nlibrary(ROAuth)\nlibrary(httr)\nlibrary(lubridate)\nlibrary(dplyr)\nsource(\"creds.R\")\nsetup_twitter_oauth(api_key, api_secret, access_token, access_token_secret)\ncleanFun <- function(htmlString) gsub(\"<.*?>\", \"\", htmlString)\nFetchTweets <- function(twitterName){\n  getTweets <- userTimeline(twitterName, n = 1000)\n  \n  userData <- data.frame(\n      \"tweet\" = sapply(getTweets, function(x) x$text),\n      \"created\" = sapply(getTweets, function(x) as.character(x$created)),\n      \"favorited\" = sapply(getTweets, function(x) x$favoriteCount),\n      \"retweeted\" = sapply(getTweets, function(x) x$retweetCount),\n      stringsAsFactors = FALSE\n    )\n  userData$created <- lubridate::ymd_hms(userData$created)\n  userData$created <- userData$created - 5*60*60 # puts in est time\n  userData$dayCreated <- wday(userData$created, label = T)\n  userData\n}\n\ntrumpsTweets <- FetchTweets(\"realDonaldTrump\")\n\nreferences <-  regmatches(trumpsTweets$tweet,\n                          gregexpr(\"@[[:alnum:]]+\",trumpsTweets$tweet))\n\n# pipe sandwich\nreferences %>% \n  unlist %>% table %>% \n  sort(decreasing = TRUE) ->\nreferences \n\ntop3 <- names(references[1:3])\n\ntrumpsTweets$nytFlag <- as.numeric(grepl(top3[1], trumpsTweets$tweet))\ntrumpsTweets$cnnFlag <- as.numeric(grepl(top3[2], trumpsTweets$tweet))\ntrumpsTweets$foxFlag <- as.numeric(grepl(top3[3], trumpsTweets$tweet))\n\n# for initial tableau exploration (3/5)\nwrite.csv(trumpsTweets, \"D:/Projects/OMTM/trump.csv\", row.names = FALSE)\n# ------\n\npence <- FetchTweets(\"vp\")\nwrite.csv(pence, \"D:/Projects/OMTM/pence.csv\", row.names = FALSE)\n\n\n\nlinks <- regmatches(trumpsTweets$tweet,\n                    gregexpr(\" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)\",\n                             trumpsTweets$tweet))\n",
    "created" : 1488919727650.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "8|37|22|0|\n",
    "hash" : "3951333056",
    "id" : "213482F5",
    "lastKnownWriteTime" : 1488946723,
    "last_content_update" : 1488946723226,
    "path" : "D:/Projects/OMTM/0.1-AccessTwitterAPI.R",
    "project_path" : "0.1-AccessTwitterAPI.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}